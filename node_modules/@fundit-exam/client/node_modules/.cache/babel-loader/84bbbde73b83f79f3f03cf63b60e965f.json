{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\raz\\\\Desktop\\\\fundit-exam-main\\\\client\\\\src\\\\App.tsx\";\nimport React from \"react\";\nimport \"./App.css\";\nimport { Matches } from \"./Matches\";\nimport { createApiClient } from \"./api\";\nconst api = createApiClient();\n\nconst App = () => {\n  const [search, setSearch] = React.useState(\"\");\n  const [countDecline, setCountDecline] = React.useState(0);\n  const [countApproved, setCountApproved] = React.useState(0);\n  const [matches, setMatches] = React.useState([]);\n  const [approveDeclineArr, setApproveDeclineArr] = React.useState([]);\n  const [Page, setPage] = React.useState(1);\n  const [showAproveDecline, setShowAproveDecline] = React.useState(false);\n  React.useEffect(() => {\n    async function fetchMatches(page) {\n      setMatches(await api.getMatches(page));\n    }\n\n    if (localStorage[\"filterMatches\"] == undefined) {\n      fetchMatches(Page);\n    } else {\n      setMatches(JSON.parse(localStorage[\"filterMatches\"]));\n      setCountApproved(JSON.parse(localStorage[\"aprovedCounter\"]));\n      setCountDecline(localStorage[\"declineCounter\"]);\n    }\n  }, []);\n  React.useEffect(() => {\n    if (JSON.parse(localStorage[\"showAproveDecline\"]) != undefined) {\n      setApproveDeclineArr(JSON.parse(localStorage[\"showAproveDecline\"]));\n    }\n\n    async function fetchMatches(page) {\n      let data = await api.getMatches(page);\n\n      if (data.length > 0) {\n        if (localStorage[\"aproved\"] != undefined && localStorage[\"decline\"] != undefined) {\n          let filterArr = data.filter(x => x.id != JSON.parse(localStorage[\"aproved\"]).find(y => y == x.id) && x.id != JSON.parse(localStorage[\"decline\"]).find(z => z == x.id));\n          setMatches(filterArr);\n        } else if (localStorage[\"decline\"] != undefined) {\n          let decliredArr = data.filter(x => {\n            var _JSON$parse;\n\n            return x.id != ((_JSON$parse = JSON.parse(localStorage[\"decline\"])) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.find(y => y == x.id));\n          });\n          setMatches(decliredArr);\n        } else if (localStorage[\"aproved\"] != undefined) {\n          let aprovedArr = data.filter(x => {\n            var _JSON$parse2;\n\n            return x.id != ((_JSON$parse2 = JSON.parse(localStorage[\"aproved\"])) === null || _JSON$parse2 === void 0 ? void 0 : _JSON$parse2.find(y => y == x.id));\n          });\n          setMatches(aprovedArr);\n        } else {\n          setMatches(data);\n        }\n      } else {\n        if (page <= 0) {\n          setPage(+Page + 1);\n        } else {\n          setPage(+Page - 1);\n        }\n      }\n    }\n\n    fetchMatches(Page);\n  }, [Page]);\n  let searchDebounce;\n\n  const onSearch = (val, newPage) => {\n    clearTimeout(searchDebounce);\n    searchDebounce = setTimeout(async () => {\n      setSearch(val);\n    }, 300);\n  };\n\n  const addScore = (id, score) => {\n    let matchesData = matches;\n    let index = matchesData.findIndex(x => x.id == id);\n    matchesData[index].borrower.creditScore = +matches[index].borrower.creditScore + +score;\n    setMatches([...matchesData]);\n  };\n\n  const aprovalCounter = (id, number) => {\n    let filterMatches = matches.filter(x => x.id != id);\n    setMatches([...filterMatches]);\n    localStorage[\"filterMatches\"] = JSON.stringify(filterMatches);\n    let filterApproveDecline = matches.find(x => x.id == id);\n    let showAproveDecline = JSON.parse(localStorage[\"showAproveDecline\"]) == undefined ? [] : JSON.parse(localStorage[\"showAproveDecline\"]);\n    showAproveDecline.push(filterApproveDecline);\n    localStorage[\"showAproveDecline\"] = JSON.stringify(showAproveDecline);\n    setApproveDeclineArr(JSON.parse(localStorage[\"showAproveDecline\"]));\n\n    if (number == -1) {\n      if (localStorage[\"decline\"] == undefined) {\n        localStorage[\"decline\"] = JSON.stringify([]);\n        let declineArr = JSON.parse(localStorage[\"decline\"]);\n        declineArr.push(id);\n        localStorage[\"decline\"] = JSON.stringify(declineArr);\n        localStorage[\"declineCounter\"] = 0;\n        localStorage[\"declineCounter\"] = +localStorage[\"declineCounter\"] + 1;\n      } else {\n        let declineArr = JSON.parse(localStorage[\"decline\"]);\n        declineArr.push(id);\n        localStorage[\"decline\"] = JSON.stringify(declineArr);\n        localStorage[\"declineCounter\"] = +localStorage[\"declineCounter\"] + 1;\n      }\n\n      setCountDecline(localStorage[\"declineCounter\"]);\n    } else {\n      if (localStorage[\"aproved\"] == undefined) {\n        localStorage[\"aproved\"] = JSON.stringify([]);\n        let aprovedArr = JSON.parse(localStorage[\"aproved\"]);\n        aprovedArr.push(id);\n        localStorage[\"aproved\"] = JSON.stringify(aprovedArr);\n        localStorage[\"aprovedCounter\"] = 0;\n        localStorage[\"aprovedCounter\"] = +localStorage[\"aprovedCounter\"] + +number;\n      } else {\n        let aprovedArr = JSON.parse(localStorage[\"aproved\"]);\n        aprovedArr.push(id);\n        localStorage[\"aproved\"] = JSON.stringify(aprovedArr);\n        localStorage[\"aprovedCounter\"] = +localStorage[\"aprovedCounter\"] + +number;\n      }\n\n      setCountApproved(localStorage[\"aprovedCounter\"]);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, \"Matches List\"), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    className: \"previous\",\n    onClick: () => setShowAproveDecline(!showAproveDecline),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, \"\\xAB approve And decline\"), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    className: \"previous\",\n    onClick: () => setPage(+Page - 1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, \"\\xAB Previous\"), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    className: \"next\",\n    onClick: () => setPage(+Page + 1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, \"Next \\xBB\"), countApproved == 1 || countApproved == 0 ? /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 51\n    }\n  }, \" \", countApproved, \" user aprovel  \") : /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 94\n    }\n  }, \" \", countApproved, \" users aprovel\"), countDecline == 1 || countDecline == 0 ? /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 49\n    }\n  }, \" \", countDecline, \" user Decline \") : /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 90\n    }\n  }, \" \", countDecline, \" users Decline\"), /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"search\",\n    placeholder: \"Search...\",\n    onChange: e => onSearch(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  })), matches ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"results\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, \"Showing \", matches.length, \" results\") : null, matches ? /*#__PURE__*/React.createElement(Matches, {\n    matches: matches,\n    search: search,\n    countDecline: countDecline,\n    countApproved: countApproved,\n    addScore: (id, score) => addScore(id, score),\n    callback: (id, number) => aprovalCounter(id, number),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, \"Loading...\"));\n};\n\nexport default App;","map":{"version":3,"sources":["C:/Users/raz/Desktop/fundit-exam-main/client/src/App.tsx"],"names":["React","Matches","createApiClient","api","App","search","setSearch","useState","countDecline","setCountDecline","countApproved","setCountApproved","matches","setMatches","approveDeclineArr","setApproveDeclineArr","Page","setPage","showAproveDecline","setShowAproveDecline","useEffect","fetchMatches","page","getMatches","localStorage","undefined","JSON","parse","data","length","filterArr","filter","x","id","find","y","z","decliredArr","aprovedArr","searchDebounce","onSearch","val","newPage","clearTimeout","setTimeout","addScore","score","matchesData","index","findIndex","borrower","creditScore","aprovalCounter","number","filterMatches","stringify","filterApproveDecline","push","declineArr","e","target","value"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./App.css\";\nimport { Matches } from \"./Matches\";\nimport { createApiClient, Match } from \"./api\";\n\nexport type AppState = {\n  matches?: Match[];\n  search: string;\n};\nconst api = createApiClient();\nconst App = () => {\n  const [search, setSearch] = React.useState<string>(\"\");\n  const [countDecline, setCountDecline] = React.useState<Number>(0);\n  const [countApproved, setCountApproved] = React.useState<Number>(0);\n  const [matches, setMatches] = React.useState<Match[]>([]);\n  const [approveDeclineArr, setApproveDeclineArr] = React.useState<Match[]>([]);\n  const [Page, setPage] = React.useState<Number>(1);\n  const [showAproveDecline, setShowAproveDecline] = React.useState<Boolean>(false);\n  React.useEffect(() => {\n    async function fetchMatches(page: Number) {\n      setMatches(await api.getMatches(page));\n    }\n    if (localStorage[\"filterMatches\"] == undefined) {\n      fetchMatches(Page);\n    }\n    else {\n      setMatches(JSON.parse(localStorage[\"filterMatches\"]))\n      setCountApproved(JSON.parse(localStorage[\"aprovedCounter\"]))\n      setCountDecline(localStorage[\"declineCounter\"])\n    }\n\n\n  }, []);\n\n  React.useEffect(() => {\n    if(JSON.parse(localStorage[\"showAproveDecline\"]) != undefined){\n      setApproveDeclineArr(JSON.parse(localStorage[\"showAproveDecline\"]))\n    }\n    async function fetchMatches(page: Number) {\n      let data = await api.getMatches(page)\n      if (data.length > 0) {\n        if (localStorage[\"aproved\"] != undefined && localStorage[\"decline\"] != undefined) {\n          let filterArr = data.filter(x => x.id != JSON.parse(localStorage[\"aproved\"]).find(y => y == x.id) &&\n            x.id != JSON.parse(localStorage[\"decline\"]).find(z => z == x.id))\n          setMatches(filterArr);\n        }\n        else if (localStorage[\"decline\"] != undefined) {\n          let decliredArr = data.filter(x => x.id != JSON.parse(localStorage[\"decline\"])?.find(y => y == x.id))\n          setMatches(decliredArr);\n        }\n        else if (localStorage[\"aproved\"] != undefined) {\n          let aprovedArr = data.filter(x => x.id != JSON.parse(localStorage[\"aproved\"])?.find(y => y == x.id))\n          setMatches(aprovedArr);\n        }\n        else {\n          setMatches(data);\n        }\n      }\n      else {\n        if (page <= 0) {\n          setPage(+Page + 1)\n        }\n        else {\n          setPage(+Page - 1)\n        }\n      }\n    }\n    fetchMatches(Page);\n  }, [Page]);\n\n  let searchDebounce: any;\n  const onSearch = (val: string, newPage?: number) => {\n    clearTimeout(searchDebounce);\n    searchDebounce = setTimeout(async () => {\n      setSearch(val);\n    }, 300);\n  };\n\n  const addScore = (id: String, score: Number) => {\n    let matchesData = matches\n    let index = matchesData.findIndex(x => x.id == id);\n    matchesData[index].borrower.creditScore = +matches[index].borrower.creditScore + +score\n    setMatches([...matchesData])\n  }\n\n  const aprovalCounter = (id: String, number: Number) => {\n    let filterMatches = matches.filter(x => x.id != id)\n    setMatches([...filterMatches])\n    localStorage[\"filterMatches\"] = JSON.stringify(filterMatches)\n    let filterApproveDecline = matches.find(x => x.id == id)\n    let showAproveDecline =  JSON.parse(localStorage[\"showAproveDecline\"]) == undefined ? [] : \n    JSON.parse(localStorage[\"showAproveDecline\"])\n        showAproveDecline.push(filterApproveDecline)\n        localStorage[\"showAproveDecline\"] = JSON.stringify(showAproveDecline)\n        setApproveDeclineArr(JSON.parse(localStorage[\"showAproveDecline\"]))\n    if (number == -1) {\n      if (localStorage[\"decline\"] == undefined) {\n        localStorage[\"decline\"] = JSON.stringify([])\n        let declineArr = JSON.parse(localStorage[\"decline\"]);\n        declineArr.push(id)\n        localStorage[\"decline\"] = JSON.stringify(declineArr)\n        localStorage[\"declineCounter\"] = 0\n        localStorage[\"declineCounter\"] = +localStorage[\"declineCounter\"] + 1\n      }\n      else {\n        let declineArr = JSON.parse(localStorage[\"decline\"]);\n        declineArr.push(id)\n        localStorage[\"decline\"] = JSON.stringify(declineArr)\n        localStorage[\"declineCounter\"] = +localStorage[\"declineCounter\"] + 1\n      }\n      setCountDecline(localStorage[\"declineCounter\"])\n    }\n    else {\n      if (localStorage[\"aproved\"] == undefined) {\n        localStorage[\"aproved\"] = JSON.stringify([])\n        let aprovedArr = JSON.parse(localStorage[\"aproved\"]);\n        aprovedArr.push(id)\n        localStorage[\"aproved\"] = JSON.stringify(aprovedArr)\n        localStorage[\"aprovedCounter\"] = 0\n        localStorage[\"aprovedCounter\"] = +localStorage[\"aprovedCounter\"] + +number\n      }\n      else {\n        let aprovedArr = JSON.parse(localStorage[\"aproved\"]);\n        aprovedArr.push(id)\n        localStorage[\"aproved\"] = JSON.stringify(aprovedArr)\n        localStorage[\"aprovedCounter\"] = +localStorage[\"aprovedCounter\"] + +number\n      }\n      setCountApproved(localStorage[\"aprovedCounter\"])\n    }\n  }\n\n  return (\n    <main>\n      <h1>Matches List</h1>\n      <a href=\"#\" className=\"previous\" onClick={() => setShowAproveDecline(!showAproveDecline)}>&laquo; approve And decline</a>\n      <a href=\"#\" className=\"previous\" onClick={() => setPage(+Page - 1)}>&laquo; Previous</a>\n      <a href=\"#\" className=\"next\" onClick={() => setPage(+Page + 1)}>Next &raquo;</a>\n      {countApproved == 1 || countApproved == 0 ? <h3> {countApproved} user aprovel  </h3> : <h3> {countApproved} users aprovel</h3>}\n      {countDecline == 1 || countDecline == 0 ? <h3> {countDecline} user Decline </h3> : <h3> {countDecline} users Decline</h3>}\n      <header>\n        <input\n          type=\"search\"\n          placeholder=\"Search...\"\n          onChange={(e) => onSearch(e.target.value)}\n        />\n      </header>\n      {matches ? (\n        <div className=\"results\">Showing {matches.length} results</div>\n      ) : null}\n      {matches ? (\n        <Matches matches={matches} search={search} countDecline={countDecline}\n          countApproved={countApproved} addScore={(id, score) => addScore(id, score)} callback={(id, number) => aprovalCounter(id, number)} />\n\n      ) : (\n\n\n        <h2>Loading...</h2>\n      )}\n    </main>\n  );\n};\nexport default App;\n"]},"metadata":{},"sourceType":"module"}